<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="3.0" xmlns:edmx="http://schemas.microsoft.com/ado/2009/11/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="FileIndex.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl">
  <EntityContainer Name="FileIndexStoreContainer">
    <EntitySet Name="Documents" EntityType="FileIndex.Store.Documents" store:Type="Tables" Schema="dbo" />
    <EntitySet Name="DocEvents" EntityType="FileIndex.Store.DocEvents" store:Type="Tables" Schema="dbo" />
    <EntitySet Name="DocPaths" EntityType="FileIndex.Store.DocPaths" store:Type="Tables" Schema="dbo" />
    <EntitySet Name="EventQueueBackups" EntityType="FileIndex.Store.EventQueueBackups" store:Type="Tables" Schema="dbo" />
    <AssociationSet Name="DocumentDocPath" Association="FileIndex.Store.DocumentDocPath">
      <End Role="Document" EntitySet="Documents" />
      <End Role="DocPath" EntitySet="DocPaths" />
    </AssociationSet>
    <AssociationSet Name="DocumentDocEvent" Association="FileIndex.Store.DocumentDocEvent">
      <End Role="Document" EntitySet="Documents" />
      <End Role="DocEvent" EntitySet="DocEvents" />
    </AssociationSet>
  </EntityContainer>
  <EntityType Name="Documents">
    <Key>
      <PropertyRef Name="DocumentHash" />
    </Key>
    <Property Name="DocumentHash" Type="nchar" Nullable="false" MaxLength="128" />
    <Property Name="size" Type="bigint" Nullable="false" />
  </EntityType>
  <EntityType Name="DocEvents">
    <Key>
      <PropertyRef Name="DocEventId" />
    </Key>
    <Property Name="DocEventId" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="date_time" Type="datetime" Nullable="false" />
    <Property Name="type" Type="nvarchar(max)" Nullable="false" />
    <Property Name="DocumentDocumentHash" Type="nchar" Nullable="false" MaxLength="128" />
    <Property Name="path" Type="nvarchar(max)" Nullable="false" />
    <Property Name="old_path" Type="nvarchar(max)" Nullable="true" />
    <Property Name="name" Type="nvarchar(max)" Nullable="false" />
    <Property Name="old_name" Type="nvarchar(max)" Nullable="true" />
  </EntityType>
  <EntityType Name="DocPaths">
    <Key>
      <PropertyRef Name="DocPathId" />
    </Key>
    <Property Name="DocPathId" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="path" Type="nvarchar(max)" Nullable="false" />
    <Property Name="DocumentDocumentHash" Type="nchar" Nullable="false" MaxLength="128" />
  </EntityType>
  <EntityType Name="EventQueueBackups">
    <Key>
      <PropertyRef Name="Id" />
    </Key>
    <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="type" Type="nvarchar(max)" Nullable="false" />
    <Property Name="path" Type="nvarchar(max)" Nullable="false" />
    <Property Name="old_path" Type="nvarchar(max)" Nullable="true" />
    <Property Name="name" Type="nvarchar(max)" Nullable="false" />
    <Property Name="old_name" Type="nvarchar(max)" Nullable="true" />
    <Property Name="DocumentDocumentHash" Type="nchar" Nullable="false" MaxLength="128" />
    <Property Name="date_time" Type="datetime" Nullable="false" />
  </EntityType>
  <Association Name="DocumentDocPath">
    <End Role="Document" Type="FileIndex.Store.Documents" Multiplicity="1" />
    <End Role="DocPath" Type="FileIndex.Store.DocPaths" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="Document">
        <PropertyRef Name="DocumentHash" />
      </Principal>
      <Dependent Role="DocPath">
        <PropertyRef Name="DocumentDocumentHash" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="DocumentDocEvent">
    <End Role="Document" Type="FileIndex.Store.Documents" Multiplicity="1" />
    <End Role="DocEvent" Type="FileIndex.Store.DocEvents" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="Document">
        <PropertyRef Name="DocumentHash" />
      </Principal>
      <Dependent Role="DocEvent">
        <PropertyRef Name="DocumentDocumentHash" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
</Schema></edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema xmlns="http://schemas.microsoft.com/ado/2009/11/edm" xmlns:cg="http://schemas.microsoft.com/ado/2006/04/codegeneration" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" Namespace="FileIndex" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" annotation:UseStrongSpatialTypes="false">
        <EntityContainer Name="FileIndexContainer" annotation:LazyLoadingEnabled="true">
          <EntitySet Name="Documents" EntityType="FileIndex.Document" />
          <EntitySet Name="DocEvents" EntityType="FileIndex.DocEvent" />
          <EntitySet Name="DocPaths" EntityType="FileIndex.DocPath" />
          <AssociationSet Name="DocumentDocPath" Association="FileIndex.DocumentDocPath">
            <End Role="Document" EntitySet="Documents" />
            <End Role="DocPath" EntitySet="DocPaths" />
          </AssociationSet>
          <AssociationSet Name="DocumentDocEvent" Association="FileIndex.DocumentDocEvent">
            <End Role="Document" EntitySet="Documents" />
            <End Role="DocEvent" EntitySet="DocEvents" />
          </AssociationSet>
          <EntitySet Name="EventQueueBackups" EntityType="FileIndex.EventQueueBackup" />
        </EntityContainer>
        <EntityType Name="Document">
          <Key>
            <PropertyRef Name="DocumentHash" />
          </Key>
          <Property Type="String" Name="DocumentHash" Nullable="false" annotation:StoreGeneratedPattern="None" Unicode="true" MaxLength="128" FixedLength="true" />
          <Property Type="Int64" Name="size" Nullable="false" />
          <NavigationProperty Name="DocPaths" Relationship="FileIndex.DocumentDocPath" FromRole="Document" ToRole="DocPath" />
          <NavigationProperty Name="DocEvents" Relationship="FileIndex.DocumentDocEvent" FromRole="Document" ToRole="DocEvent" />
        </EntityType>
        <EntityType Name="DocEvent">
          <Key>
            <PropertyRef Name="DocEventId" />
          </Key>
          <Property Type="Int32" Name="DocEventId" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="DateTime" Name="date_time" Nullable="false" />
          <Property Type="String" Name="type" Nullable="false" />
          <NavigationProperty Name="Document" Relationship="FileIndex.DocumentDocEvent" FromRole="DocEvent" ToRole="Document" />
          <Property Type="String" Name="DocumentDocumentHash" Nullable="false" MaxLength="128" FixedLength="true" Unicode="true" />
          <Property Type="String" Name="path" Nullable="false" />
          <Property Type="String" Name="old_path" Nullable="true" />
          <Property Type="String" Name="name" Nullable="false" />
          <Property Type="String" Name="old_name" Nullable="true" />
        </EntityType>
        <EntityType Name="DocPath">
          <Key>
            <PropertyRef Name="DocPathId" />
          </Key>
          <Property Type="Int32" Name="DocPathId" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="path" Nullable="false" />
          <NavigationProperty Name="Document" Relationship="FileIndex.DocumentDocPath" FromRole="DocPath" ToRole="Document" />
          <Property Type="String" Name="DocumentDocumentHash" Nullable="false" MaxLength="128" FixedLength="true" Unicode="true" />
        </EntityType>
        <Association Name="DocumentDocPath">
          <End Type="FileIndex.Document" Role="Document" Multiplicity="1" />
          <End Type="FileIndex.DocPath" Role="DocPath" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Document">
              <PropertyRef Name="DocumentHash" />
            </Principal>
            <Dependent Role="DocPath">
              <PropertyRef Name="DocumentDocumentHash" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="DocumentDocEvent">
          <End Type="FileIndex.Document" Role="Document" Multiplicity="1" />
          <End Type="FileIndex.DocEvent" Role="DocEvent" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Document">
              <PropertyRef Name="DocumentHash" />
            </Principal>
            <Dependent Role="DocEvent">
              <PropertyRef Name="DocumentDocumentHash" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="EventQueueBackup">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Type="Int32" Name="Id" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="type" Nullable="false" />
          <Property Type="String" Name="path" Nullable="false" />
          <Property Type="String" Name="old_path" Nullable="true" />
          <Property Type="String" Name="name" Nullable="false" />
          <Property Type="String" Name="old_name" Nullable="true" />
          <Property Type="String" Name="DocumentDocumentHash" Nullable="false" MaxLength="128" FixedLength="true" Unicode="true" />
          <Property Type="DateTime" Name="date_time" Nullable="false" />
        </EntityType>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
    <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2009/11/mapping/cs">
  <EntityContainerMapping StorageEntityContainer="FileIndexStoreContainer" CdmEntityContainer="FileIndexContainer">
    <EntitySetMapping Name="Documents">
      <EntityTypeMapping TypeName="IsTypeOf(FileIndex.Document)">
        <MappingFragment StoreEntitySet="Documents">
          <ScalarProperty Name="DocumentHash" ColumnName="DocumentHash" />
          <ScalarProperty Name="size" ColumnName="size" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
    <EntitySetMapping Name="DocEvents">
      <EntityTypeMapping TypeName="IsTypeOf(FileIndex.DocEvent)">
        <MappingFragment StoreEntitySet="DocEvents">
          <ScalarProperty Name="DocEventId" ColumnName="DocEventId" />
          <ScalarProperty Name="date_time" ColumnName="date_time" />
          <ScalarProperty Name="type" ColumnName="type" />
          <ScalarProperty Name="DocumentDocumentHash" ColumnName="DocumentDocumentHash" />
          <ScalarProperty Name="path" ColumnName="path" />
          <ScalarProperty Name="old_path" ColumnName="old_path" />
          <ScalarProperty Name="name" ColumnName="name" />
          <ScalarProperty Name="old_name" ColumnName="old_name" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
    <EntitySetMapping Name="DocPaths">
      <EntityTypeMapping TypeName="IsTypeOf(FileIndex.DocPath)">
        <MappingFragment StoreEntitySet="DocPaths">
          <ScalarProperty Name="DocPathId" ColumnName="DocPathId" />
          <ScalarProperty Name="path" ColumnName="path" />
          <ScalarProperty Name="DocumentDocumentHash" ColumnName="DocumentDocumentHash" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
    <EntitySetMapping Name="EventQueueBackups">
      <EntityTypeMapping TypeName="IsTypeOf(FileIndex.EventQueueBackup)">
        <MappingFragment StoreEntitySet="EventQueueBackups">
          <ScalarProperty Name="Id" ColumnName="Id" />
          <ScalarProperty Name="type" ColumnName="type" />
          <ScalarProperty Name="path" ColumnName="path" />
          <ScalarProperty Name="old_path" ColumnName="old_path" />
          <ScalarProperty Name="name" ColumnName="name" />
          <ScalarProperty Name="old_name" ColumnName="old_name" />
          <ScalarProperty Name="DocumentDocumentHash" ColumnName="DocumentDocumentHash" />
          <ScalarProperty Name="date_time" ColumnName="date_time" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
  </EntityContainerMapping>
</Mapping></edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <edmx:Designer xmlns="http://schemas.microsoft.com/ado/2009/11/edmx">
    <edmx:Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </edmx:Connection>
    <edmx:Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="True" />
        <DesignerProperty Name="CodeGenerationStrategy" Value="None" />
        <DesignerProperty Name="IncludeForeignKeysInModel" Value="True" />
      </DesignerInfoPropertySet>
    </edmx:Options>
    <!-- Diagram content (shape and connector positions) -->
    <edmx:Diagrams>
    </edmx:Diagrams>
  </edmx:Designer>
</edmx:Edmx>
